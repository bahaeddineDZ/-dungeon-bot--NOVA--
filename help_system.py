import discord
from discord.ext import commands
from discord import Embed, ButtonStyle, Interaction
from discord.ui import View, Button, Select, Modal, TextInput
import json
import time

class AdvancedHelpSystem:
    def __init__(self, bot):
        self.bot = bot
        self.help_categories = {
            "ุงูุชุตุงุฏ": {
                "emoji": "๐ฐ",
                "commands": ["ุฑุตูุฏ", "ูููู", "ุนูู", "ุชุฑููุฉ", "ุชุฏุงูู", "ุงุณุชุซูุงุฑ"],
                "description": "ุฃูุงูุฑ ุฅุฏุงุฑุฉ ุงูุฃููุงู ูุงูุนููุงุช"
            },
            "ูุชุฌุฑ": {
                "emoji": "๐",
                "commands": ["ูุชุฌุฑ", "ุดุฑุงุก", "ุจูุน", "ุญููุจุฉ"],
                "description": "ูุธุงู ุงููุชุฌุฑ ูุงูุชุณูู"
            },
            "ูุชุงู": {
                "emoji": "โ๏ธ",
                "commands": ["ุงุฎุชุตุงุต", "ููุจ", "ุงูุชูุงู", "ุญูุงูุฉ", "ุฏุฑุน", "ุชุญุฏู", "ูุจุงุฑุฒุฉ"],
                "description": "ุฃูุธูุฉ ุงููุชุงู ูุงูุงุฎุชุตุงุตุงุช"
            },
            "ุฃูุนุงุจ": {
                "emoji": "๐ฎ",
                "commands": ["ุญุฌุฑ_ูุฑูุฉ_ููุต", "ุชุฎููู", "ุฐุงูุฑุฉ", "ุฑูุงุถูุงุช", "ูููุงุช"],
                "description": "ุงูุฃูุนุงุจ ุงูุชูุงุนููุฉ ูุงูุชุฑููู"
            },
            "ุฒุฑุงุนุฉ": {
                "emoji": "๐พ",
                "commands": ["ูุฒุงุฑุน", "ุฒุฑุน", "ูุฒุฑุนุฉ"],
                "description": "ูุธุงู ุงูุฒุฑุงุนุฉ ูุงููุญุงุตูู"
            },
            "ุตูุฏ": {
                "emoji": "๐ฃ",
                "commands": ["ุตูุงุฏ", "ุตูุฏ", "ุญูุถ"],
                "description": "ูุธุงู ุงูุตูุฏ ูุชุฑุจูุฉ ุงูุฃุณูุงู"
            },
            "ุณุฑุงุฏูุจ": {
                "emoji": "๐ฐ",
                "commands": ["ุณุฑุงุฏูุจ", "ุนุชุงุฏ", "ุชุจุฑูุฏ_ุณุฑุงุฏูุจ"],
                "description": "ุนุงูู ุงูุณุฑุงุฏูุจ ูุงููุนุงุฑู ุงูููุญููุฉ"
            },
            "ููุงู": {
                "emoji": "๐ฏ",
                "commands": ["ููุงู", "ูุณุชูู", "ุฎุจุฑุฉ", "ููุงูุขุช"],
                "description": "ูุธุงู ุงูููุงู ูููุงุท ุงูุฎุจุฑุฉ"
            },
            "ุฅุญุตุงุฆูุงุช": {
                "emoji": "๐",
                "commands": ["ููุงุฆู", "ุณุฌูุงุช", "ุฅุญุตุงุฆูุงุช", "ุฃูุดุทุชู", "ุซุฑูุฉ"],
                "description": "ุงูุณุฌูุงุช ูุงูุฅุญุตุงุฆูุงุช"
            }
        }

    def create_main_help_embed(self):
        """ุฅูุดุงุก ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูููุณุงุนุฏุฉ"""
        embed = Embed(
            title="๐ ูุฑูุฒ ุงููุณุงุนุฏุฉ ุงูุดุงูู",
            description="๐ฎ **ูุฑุญุจุงู ุจู ูู ุฏููู ูุธุงู NOVA BANK ุงููุงูู!**\n\nุงุฎุชุฑ ูุฆุฉ ูู ุงูุฃุณูู ููุญุตูู ุนูู ูุนูููุงุช ููุตูุฉ:",
            color=0x3498db
        )

        # ุฅุถุงูุฉ ูุนูููุงุช ุนุงูุฉ
        embed.add_field(
            name="๐ ูุธุฑุฉ ุนุงูุฉ",
            value="ูุฐุง ูุธุงู ุงูุชุตุงุฏู ูุชุทูุฑ ูุญุชูู ุนูู:\nโข 3 ุนููุงุช ูุฎุชููุฉ\nโข 4 ุงุฎุชุตุงุตุงุช ูุชุงููุฉ\nโข 7 ุณุฑุงุฏูุจ ุฃุณุทูุฑูุฉ\nโข ุฃูุธูุฉ ุฒุฑุงุนุฉ ูุตูุฏ\nโข ุฃูุนุงุจ ุชูุงุนููุฉ ูุชููุนุฉ",
            inline=False
        )

        embed.add_field(
            name="๐ ูููุจุชุฏุฆูู",
            value="1. ุงุจุฏุฃ ุจุงูุฃูุฑ `ูููู` ููุญุตูู ุนูู ุฑุตูุฏ ุฃููู\n2. ุงุฎุชุฑ ุงุฎุชุตุงุตู ุจู `ุงุฎุชุตุงุต`\n3. ุงุนูู ุจุงูุชุธุงู ุจู `ุนูู`\n4. ุชุณูู ูู `ูุชุฌุฑ`",
            inline=True
        )

        embed.add_field(
            name="๐ก ูุตุงุฆุญ ูููุฉ",
            value="โข ุงุณุชุฎุฏู `ุชุจุฑูุฏ` ููุนุฑูุฉ ูุชู ููููู ุงุณุชุฎุฏุงู ุงูุฃูุงูุฑ\nโข ุฑุงูุจ ุฃุณุนุงุฑ ุงููุชุฌุฑ ูุฃูุถู ุงูุตููุงุช\nโข ููู ุงูููุงู ููุญุตูู ุนูู ุฎุจุฑุฉ ุฅุถุงููุฉ",
            inline=True
        )

        embed.set_footer(text="๐ฌ ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ ุฃุฏูุงู ููุชููู ุจูู ุงููุฆุงุช")

        return embed

class DetailedHelpView(View):
    def __init__(self, help_system):
        super().__init__(timeout=300)
        self.help_system = help_system

        # ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุงููุฆุงุช
        for category, info in help_system.help_categories.items():
            self.add_item(CategoryButton(category, info, help_system))

class CategoryButton(Button):
    def __init__(self, category, info, help_system):
        super().__init__(
            label=category,
            emoji=info["emoji"],
            style=ButtonStyle.primary,
            row=len([i for i in range(5)]) // 3
        )
        self.category = category
        self.info = info
        self.help_system = help_system

    async def callback(self, interaction: Interaction):
        embed = Embed(
            title=f"{self.info['emoji']} {self.category}",
            description=self.info["description"],
            color=0x2ecc71
        )

        # ุฅุถุงูุฉ ุงูุฃูุงูุฑ ูุน ุดุฑุญ ูุจุณุท
        commands_text = ""
        for command in self.info["commands"]:
            commands_text += f"โข `{command}` - {self.get_command_description(command)}\n"

        embed.add_field(
            name="๐ ุงูุฃูุงูุฑ ุงููุชุงุญุฉ",
            value=commands_text,
            inline=False
        )

        # ุฅุถุงูุฉ ูุตุงุฆุญ ุฎุงุตุฉ ุจุงููุฆุฉ
        tips = self.get_category_tips(self.category)
        if tips:
            embed.add_field(
                name="๐ก ูุตุงุฆุญ ููุนูููุงุช",
                value=tips,
                inline=False
            )

        embed.set_footer(text="๐ ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ ููุนูุฏุฉ ุฃู ุงูุชููู")

        await interaction.response.send_message(embed=embed, ephemeral=True)

    def get_command_description(self, command):
        """ูุตู ูุฎุชุตุฑ ููู ุฃูุฑ"""
        descriptions = {
            "ุฑุตูุฏ": "ุนุฑุถ ุฃููุงูู ูุนููุงุชู",
            "ูููู": "ููุงูุฃุฉ ููููุฉ ูุฌุงููุฉ",
            "ุนูู": "ุงุนูู ูุงุฑุจุญ ุงููุงู",
            "ุชุฑููุฉ": "ุงุฑูู ูุธููุชู",
            "ุชุฏุงูู": "ุชุฏุงูู ูู ุงูุฃุณูุงู",
            "ุงุณุชุซูุงุฑ": "ุงุณุชุซูุฑ ูู ุงูุดุฑูุงุช",
            "ูุชุฌุฑ": "ุชุณูู ูุงุดุชุฑ ุงูุนูุงุตุฑ",
            "ุดุฑุงุก": "ุดุฑุงุก ุณุฑูุน",
            "ุจูุน": "ุจูุน ุงูุนูุงุตุฑ",
            "ุญููุจุฉ": "ุนุฑุถ ููุชููุงุชู",
            "ุงุฎุชุตุงุต": "ุงุฎุชูุงุฑ ูุชุฑููุฉ ุงูุชุฎุตุต",
            "ููุจ": "ููุจ ุงููุงุนุจูู ุงูุขุฎุฑูู",
            "ุงูุชูุงู": "ุงูุชูู ูู ุงููุงูุจูู",
            "ุญูุงูุฉ": "ุงุญูู ููุณู ุฃู ุบูุฑู",
            "ุฏุฑุน": "ุฏุฑุน ุณูุฑุง ุงูุฎุงุต",
            "ุชุญุฏู": "ุชุญุฏู ูุงุนุจ ูู ูุฑุงููุฉ",
            "ูุจุงุฑุฒุฉ": "ูุจุงุฑุฒุฉ ุณุฑูุนุฉ",
            "ุญุฌุฑ_ูุฑูุฉ_ููุต": "ูุนุจุฉ ููุงุณูููุฉ",
            "ุชุฎููู": "ุฎูู ุงูุฑูู",
            "ุฐุงูุฑุฉ": "ูุนุจุฉ ุงูุฐุงูุฑุฉ",
            "ุฑูุงุถูุงุช": "ุญู ุงููุนุงุฏูุงุช",
            "ูููุงุช": "ุชุฑุชูุจ ุงููููุงุช",
            "ูุฒุงุฑุน": "ุดุฑุงุก ุงูุจุฐูุฑ",
            "ุฒุฑุน": "ุฒุฑุงุนุฉ ุงูุจุฐูุฑ",
            "ูุฒุฑุนุฉ": "ุฅุฏุงุฑุฉ ุงููุฒุฑุนุฉ",
            "ุตูุงุฏ": "ุดุฑุงุก ุงูุทูุนู",
            "ุตูุฏ": "ุงุตุทูุงุฏ ุงูุฃุณูุงู",
            "ุญูุถ": "ุฅุฏุงุฑุฉ ุญูุถ ุงูุณูู",
            "ุณุฑุงุฏูุจ": "ุฏุฎูู ุงูุณุฑุงุฏูุจ",
            "ุนุชุงุฏ": "ุดุฑุงุก ุงููุนุฏุงุช",
            "ุชุจุฑูุฏ_ุณุฑุงุฏูุจ": "ุญุงูุฉ ุชุจุฑูุฏ ุงูุณุฑุงุฏูุจ",
            "ููุงู": "ุนุฑุถ ุงูููุงู",
            "ูุณุชูู": "ูุนูููุงุช ุงููุณุชูู",
            "ุฎุจุฑุฉ": "ูุงุฆูุฉ ุงูุฎุจุฑุฉ",
            "ููุงูุขุช": "ุงูููุงูุขุช ุงููุชุงุญุฉ",
            "ููุงุฆู": "ููุงุฆู ุงูุชุฑุชูุจ",
            "ุณุฌูุงุช": "ุงูุณุฌูุงุช ูุงูุฃูุดุทุฉ",
            "ุฅุญุตุงุฆูุงุช": "ุงูุฅุญุตุงุฆูุงุช ุงูุนุงูุฉ",
            "ุฃูุดุทุชู": "ุฃูุดุทุชู ุงูุฃุฎูุฑุฉ",
            "ุซุฑูุฉ": "ูุงุฆูุฉ ุงูุฃุซุฑูุงุก"
        }
        return descriptions.get(command, "ูุตู ุบูุฑ ูุชููุฑ")

    def get_category_tips(self, category):
        """ูุตุงุฆุญ ุฎุงุตุฉ ุจูู ูุฆุฉ"""
        tips = {
            "ุงูุชุตุงุฏ": "โข ุงุณุชุฎุฏู ุงูุฃูุฑ ูููู ูู 24 ุณุงุนุฉ\nโข ุงูุนูู ูุนุทู ุฏุฎู ุซุงุจุช\nโข ุงูุชุฏุงูู ูุฑุจุญ ููู ูุญููู ุจุงููุฎุงุทุฑ",
            "ูุชุฌุฑ": "โข ุงูุฃุณุนุงุฑ ุชุชุบูุฑ ูู 6 ุฏูุงุฆู\nโข ุฑุงูุจ ุงููุคุดุฑุงุช ููุดุฑุงุก ุจุณุนุฑ ููุฎูุถ\nโข ุงุญุชูุธ ุจุงูุนูุงุตุฑ ุงููุงุฏุฑุฉ",
            "ูุชุงู": "โข ูู ุงุฎุชุตุงุต ูู ูุฏุฑุงุช ุฎุงุตุฉ\nโข ุงูููุจ ูู ูุชุฑุฉ ุชุจุฑูุฏ\nโข ุงููุญุงุฑุจ ููููู ุงูุงูุชูุงู",
            "ุฃูุนุงุจ": "โข ูู ูุนุจุฉ ููุง ูุชุฑุฉ ุชุจุฑูุฏ\nโข ุงูููุฒ ูุนุทู ููุงูุขุช ุฃูุจุฑ\nโข ุญุชู ุงูุฎุณุงุฑุฉ ุชุนุทู ููุงูุฃุฉ ุชุดุฌูุนูุฉ",
            "ุฒุฑุงุนุฉ": "โข ูู ูุญุตูู ูู ููุช ููู ูุฎุชูู\nโข ุงููุญุงุตูู ุงูุฃุบูู ุชุญุชุงุฌ ููุช ุฃุทูู\nโข ุชุงุจุน ูุฒุฑุนุชู ุจุงูุชุธุงู",
            "ุตูุฏ": "โข ุงูุทูุนู ุงูุฃูุถู ูุฒูุฏ ูุฑุต ุงูุตูุฏ\nโข ุถุน ุงูุฃุณูุงู ูู ุงูุญูุถ ูุชููู\nโข ุงูุฃุณูุงู ุงูุฃูุจุฑ ุณุนุฑุงู ุฃุนูู",
            "ุณุฑุงุฏูุจ": "โข ุชุญุชุงุฌ ุนุชุงุฏ ุฌูุฏ ููุณุฑุงุฏูุจ ุงูุตุนุจุฉ\nโข ูู ุณุฑุฏุงุจ ูู ุฒุนูู ูุฎุชูู\nโข ุงูุงุฎุชุตุงุต ูุคุซุฑ ุนูู ุงููุชุงู",
            "ููุงู": "โข ุงูููุงู ุชุชุฌุฏุฏ ููููุงู\nโข ุฅูุฌุงุฒ ุงูููุงู ูุนุทู ุฎุจุฑุฉ\nโข ุงูุฎุจุฑุฉ ุชุฑูุน ูุณุชูุงู",
            "ุฅุญุตุงุฆูุงุช": "โข ุชุงุจุน ุชูุฏูู ูุชุทูุฑู\nโข ูุงุฑู ููุณู ุจุงูุขุฎุฑูู\nโข ุงูุณุฌูุงุช ุชุธูุฑ ูุดุงุทุงุชู"
        }
        return tips.get(category, "")

def setup_advanced_help(bot):
    """ุฅุนุฏุงุฏ ูุธุงู ุงููุณุงุนุฏุฉ ุงููุชูุฏู"""
    help_system = AdvancedHelpSystem(bot)

    @bot.command(name="ุดุฑูุญุงุช")
    async def advanced_help(ctx):
        """ูุธุงู ุงููุณุงุนุฏุฉ ุงููุชูุฏู"""
        embed = help_system.create_main_help_embed()
        view = DetailedHelpView(help_system)
        await ctx.send(embed=embed, view=view)

    return help_system